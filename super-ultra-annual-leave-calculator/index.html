<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì—°ì°¨Â·ë¯¸ì‚¬ìš©ìˆ˜ë‹¹ ìŠˆí¼ ìš¸íŠ¸ë¼ ê³„ì‚°ê¸° (ì •ì )</title>
  <link rel="icon" href="/static/favicon.ico" />
  <style>
    :root{
      --black:#111;
      --line:#e5e5e5;
      --sun:#c8352d;
      --sat:#1e5fbf;
      --accent:#111;
      --bg:#fff;
      --card-bg:#fff;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      background:var(--bg);
      color:var(--black);
      font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans KR",Arial,sans-serif;
      line-height:1.5;
    }
    .wrap{
      max-width:1024px;
      margin:0 auto;
      padding:16px 12px 40px;
    }
    h1{
      font-size:1.4rem;
      margin:8px 0 4px;
    }
    .sub{
      margin:0 0 12px;
      font-size:0.9rem;
      color:#666;
    }
    h2{
      font-size:1.1rem;
      margin:0 0 8px;
    }
    h3{
      font-size:1rem;
      margin:0 0 6px;
    }
    .card{
      border:1px solid var(--line);
      border-radius:16px;
      padding:16px 14px;
      margin:10px 0;
      background:var(--card-bg);
    }
    label{
      font-size:0.9rem;
      display:block;
      margin:0 0 4px;
    }
    .row{
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      margin:4px 0;
    }
    .field{
      flex:1 1 160px;
      min-width:0;
    }
    input[type="text"],
    input[type="number"],
    input[type="date"],
    select{
      width:100%;
      padding:6px 8px;
      border:1px solid #ccc;
      border-radius:8px;
      font-size:0.9rem;
    }
    input[type="number"]{
      text-align:right;
    }
    .small{
      font-size:0.8rem;
      color:#777;
    }
    .btn-row{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top:8px;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:6px 12px;
      border-radius:999px;
      border:1px solid var(--black);
      background:var(--black);
      color:#fff;
      font-size:0.9rem;
      cursor:pointer;
      text-decoration:none;
      white-space:nowrap;
    }
    .btn.outline{
      background:#fff;
      color:var(--black);
    }
    .btn:disabled{
      opacity:0.5;
      cursor:default;
    }
    table{
      width:100%;
      border-collapse:collapse;
      font-size:0.85rem;
    }
    th,td{
      border:1px solid var(--line);
      padding:4px 6px;
      text-align:center;
    }
    th{
      background:#fafafa;
      font-weight:600;
    }
    td input{
      width:100%;
      padding:4px 6px;
      border:1px solid #ccc;
      border-radius:6px;
      font-size:0.8rem;
    }
    .result-grid{
      display:flex;
      flex-direction:column;
      gap:6px;
      font-size:0.92rem;
    }
    .result-item{
      display:flex;
      align-items:baseline;
      gap:8px;
      flex-wrap:wrap;
    }
    .result-label{
      min-width:200px;
      font-weight:600;
    }
    .result-value{
      margin-left:auto;
      text-align:right;
      font-variant-numeric:tabular-nums;
    }
    .tag{
      display:inline-flex;
      align-items:center;
      padding:2px 8px;
      border-radius:999px;
      border:1px solid var(--line);
      font-size:0.75rem;
      color:#555;
      margin-left:4px;
      white-space:nowrap;
    }
    .danger{
      color:#c8352d;
    }
    .muted{
      color:#777;
    }
    .highlight{
      font-size:1.1rem;
      font-weight:700;
    }
    hr{
      border:0;
      border-top:1px solid var(--line);
      margin:12px 0;
    }
    @media (max-width:600px){
      .result-label{min-width:140px;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>ì—°ì°¨Â·ë¯¸ì‚¬ìš©ìˆ˜ë‹¹ ìŠˆí¼ ìš¸íŠ¸ë¼ ê³„ì‚°ê¸° (ì •ì )</h1>
      <p class="sub">
        <b>ê·¼ë¡œê¸°ì¤€ë²• + ë‹¨ì²´í˜‘ì•½ + ì§€ì¹¨</b>ì„ ì—¼ë‘ì— ë‘ê³  ì„¤ê³„í•œ ì •ì  í˜ì´ì§€ìš© ì—”ì§„ì…ë‹ˆë‹¤.<br>
        ê·œì • ì„¸íŠ¸ë¥¼ ì„ íƒí•˜ë©´, í•´ë‹¹ í”„ë¡œí•„ì˜ <b>ì—°ì°¨ ë¶€ì—¬ ê·œì¹™ Â· íšŒê³„ì—°ë„ ê¸°ì¤€ Â· ì ˆì‚¬ê·œì¹™</b> ë“±ì„ ë°˜ì˜í•´ì„œ
        <b>ì—°ì°¨ì¼ìˆ˜ Â· ë¯¸ì‚¬ìš©ìˆ˜ë‹¹</b>ì„ ê³„ì‚°í•©ë‹ˆë‹¤.<br>
        <span class="small">
          â€» ì´ ì½”ë“œëŠ” êµ¬ì¡°ë¥¼ ë§Œë“  ì˜ˆì‹œì´ë©°, ì‹¤ì œ ë‹¨ì²´í˜‘ì•½Â·ì§€ì¹¨ ìˆ«ìëŠ” ë°˜ë“œì‹œ ì§ì ‘ í™•ì¸ í›„
          <code>RULE_PROFILES</code> ìƒë‹¨ ì„¤ì •ì„ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.
        </span>
      </p>
    </header>

    <!-- 0. ê·œì • ì„¸íŠ¸ ì„ íƒ -->
    <section class="card">
      <h2>0. ê·œì • ì„¸íŠ¸ ì„ íƒ</h2>
      <div class="row">
        <div class="field">
          <label for="ruleProfile">
            ê·œì • ì„¸íŠ¸
            <span class="small">(ë‹¨ì²´í˜‘ì•½/ì§€ì¹¨/ë²•ì • ê¸°ë³¸ ë“±)</span>
          </label>
          <select id="ruleProfile" onchange="onProfileChange()">
            <option value="law_basic">[ë²•ì • ê¸°ë³¸í˜•] ê·¼ë¡œê¸°ì¤€ë²• ë‹¨ìˆœ ë²„ì „</option>
            <option value="gw_edu_example">[ì˜ˆì‹œ] ê°•ì› êµìœ¡ê³µë¬´ì§ ë‹¨í˜‘í˜•(ìƒ˜í”Œ)</option>
            <option value="custom">[ì»¤ìŠ¤í…€] ë‚´ê°€ ì§ì ‘ ê·œì • ì ìš©</option>
          </select>
        </div>
        <div class="field">
          <label>íšŒê³„ì—°ë„ ê¸°ì¤€ì¼</label>
          <div id="profileYearBaseView" class="small muted">
            ê·œì • ì„¸íŠ¸ë¥¼ ì„ íƒí•˜ë©´ ìë™ í‘œì‹œë©ë‹ˆë‹¤.
          </div>
        </div>
      </div>
      <div class="row">
        <div class="field">
          <label>ì ˆì‚¬Â·ë°˜ì˜¬ë¦¼ ê·œì¹™</label>
          <div id="profileRoundingView" class="small muted">
            ê·œì • ì„¸íŠ¸ë¥¼ ì„ íƒí•˜ë©´ ìë™ í‘œì‹œë©ë‹ˆë‹¤.
          </div>
        </div>
        <div class="field">
          <label>ì„¤ëª…</label>
          <div id="profileDescView" class="small muted">
            ìƒë‹¨ JavaScriptì˜ <code>RULE_PROFILES</code>ì—ì„œ ì–¸ì œë“  ìˆ˜ì • ê°€ëŠ¥í•˜ë„ë¡ ì„¤ê³„ë¼ ìˆìŠµë‹ˆë‹¤.
          </div>
        </div>
      </div>
    </section>

    <!-- 1. ê¸°ë³¸ ì •ë³´ -->
    <section class="card">
      <h2>1. ê¸°ë³¸ì •ë³´</h2>
      <div class="row">
        <div class="field">
          <label for="year">ê¸°ì¤€ ì—°ë„</label>
          <input type="number" id="year" value="2025" min="2000" max="2100" />
        </div>
        <div class="field">
          <label for="baseDate">
            ì—°ì°¨ ê¸°ì¤€ì¼
            <span class="small">(ê·œì • ì„¸íŠ¸ì—ì„œ íšŒê³„ì—°ë„ ê¸°ì¤€ ìë™ ë°˜ì˜)</span>
          </label>
          <input type="date" id="baseDate" />
        </div>
      </div>
      <div class="row">
        <div class="field">
          <label for="hireDate">ìµœì´ˆ ì„ìš©(ì…ì‚¬)ì¼ì</label>
          <input type="date" id="hireDate" />
        </div>
        <div class="field">
          <label for="jobType">ì§ì¢…</label>
          <select id="jobType">
            <option value="">ì„ íƒ</option>
            <option value="ì¡°ë¦¬ì‚¬">ì¡°ë¦¬ì‚¬</option>
            <option value="ì¡°ë¦¬ì‹¤ë¬´ì‚¬">ì¡°ë¦¬ì‹¤ë¬´ì‚¬</option>
            <option value="í–‰ì •ì‹¤ë¬´ì‚¬">í–‰ì •ì‹¤ë¬´ì‚¬</option>
            <option value="ì‚¬ì„œ">ì‚¬ì„œ</option>
            <option value="ëŒë´„ì „ë‹´ì‚¬">ëŒë´„ì „ë‹´ì‚¬</option>
            <option value="ê¸°íƒ€">ê¸°íƒ€(ì§ì ‘ì…ë ¥)</option>
          </select>
        </div>
        <div class="field">
          <label for="jobTypeCustom">ì§ì¢… ì§ì ‘ì…ë ¥ (ì„ íƒ)</label>
          <input type="text" id="jobTypeCustom" placeholder="ì˜ˆ: ìš´ë™ë¶€ì§€ë„ì, íŠ¹ìˆ˜ìš´ì˜ì§êµ° ë“±" />
        </div>
      </div>
      <div class="row">
        <div class="field">
          <label for="workType">ê·¼ë¬´í˜•íƒœ</label>
          <select id="workType">
            <option value="ìƒì‹œ">ìƒì‹œê·¼ë¡œì</option>
            <option value="ë¹„ìƒì‹œ">ë°©í•™ì¤‘ ë¹„ìƒì‹œê·¼ë¡œì</option>
          </select>
        </div>
        <div class="field">
          <label>ê¸°ì¤€ì¼ í˜„ì¬ ê·¼ì†ì—°ìˆ˜ (ìë™ê³„ì‚°)</label>
          <div id="serviceYearsView" class="small muted">ì…ì‚¬ì¼Â·ê¸°ì¤€ì¼ ì…ë ¥ ì‹œ í‘œì‹œë©ë‹ˆë‹¤.</div>
        </div>
      </div>
      <div class="btn-row">
        <button class="btn outline" type="button" onclick="calcServiceYears()">ê·¼ì†ì—°ìˆ˜ ê³„ì‚°</button>
      </div>
    </section>

    <!-- 2. ì¶œê·¼ìœ¨ / ì›”ë³„ ê°œê·¼ -->
    <section class="card">
      <h2>2. ì¶œê·¼ìœ¨ / ì›”ë³„ ê°œê·¼ ì •ë³´</h2>
      <p class="small">
        í•´ë‹¹ ì—°ë„ 1ë…„ì¹˜ <b>ì†Œì •ê·¼ë¡œì¼ìˆ˜ / ì‹¤ì œ ê·¼ë¡œì¼ìˆ˜</b>ë¥¼ ì›”ë³„ë¡œ ì…ë ¥í•˜ë©´
        <b>ì—°ê°„ ì¶œê·¼ìœ¨</b>ê³¼ <b>ì›” ê°œê·¼ ê°œì›”ìˆ˜</b>ë¥¼ ìë™ ê³„ì‚°í•©ë‹ˆë‹¤.
        (ë‚˜ì´ìŠ¤Â·ê·¼ë¬´ìƒí™©ë¶€ ê·¸ëŒ€ë¡œ ì˜®ê²¨ ì ëŠ” ìš©ë„)
      </p>
      <div style="overflow-x:auto;">
        <table>
          <thead>
            <tr>
              <th>ì›”</th>
              <th>ì†Œì •ê·¼ë¡œì¼ìˆ˜</th>
              <th>ì‹¤ì œ ê·¼ë¡œì¼ìˆ˜</th>
            </tr>
          </thead>
          <tbody id="attBody">
          </tbody>
        </table>
      </div>
      <div class="btn-row">
        <button class="btn outline" type="button" onclick="fillDefaultWorkingDays()">ì†Œì •ê·¼ë¡œì¼ ëŒ€ëµ ì±„ìš°ê¸°</button>
        <button class="btn" type="button" onclick="calcAttendance()">ì¶œê·¼ìœ¨ ê³„ì‚°</button>
      </div>
      <hr>
      <div class="result-grid">
        <div class="result-item">
          <div class="result-label">ì—°ê°„ ì†Œì •ê·¼ë¡œì¼ìˆ˜ í•©ê³„</div>
          <div class="result-value" id="totalPlannedView">-</div>
        </div>
        <div class="result-item">
          <div class="result-label">ì—°ê°„ ì‹¤ì œ ê·¼ë¡œì¼ìˆ˜ í•©ê³„</div>
          <div class="result-value" id="totalWorkedView">-</div>
        </div>
        <div class="result-item">
          <div class="result-label">ì—°ê°„ ì¶œê·¼ìœ¨</div>
          <div class="result-value" id="attendanceRateView">-</div>
        </div>
        <div class="result-item">
          <div class="result-label">ì›” ê°œê·¼ ê°œì›” ìˆ˜(ì†Œì •=ì‹¤ì œ)</div>
          <div class="result-value" id="fullMonthCountView">-</div>
        </div>
      </div>
    </section>

    <!-- 3. ì—°ì°¨ ë¶€ì—¬Â·ì‚¬ìš© ì •ë³´ -->
    <section class="card">
      <h2>3. ì—°ì°¨ ë¶€ì—¬Â·ì‚¬ìš© ì •ë³´</h2>
      <p class="small">
        ì„ íƒí•œ <b>ê·œì • ì„¸íŠ¸</b>ì— ë”°ë¼ <b>ì¶”ì²œ ë¶€ì—¬ì—°ì°¨ì¼ìˆ˜</b>ë¥¼ ê³„ì‚°í•˜ê³ ,
        ì‹¤ì œ ë¶€ì—¬ì¼ìˆ˜ëŠ” í•„ìš”ì‹œ ì§ì ‘ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
        ë‹¨ì²´í˜‘ì•½Â·ì§€ì¹¨ì„ ê·¸ëŒ€ë¡œ ë°˜ì˜í•˜ë ¤ë©´ ìƒë‹¨ì˜ <code>RULE_PROFILES</code>ì—ì„œ
        ê° í”„ë¡œí•„ì˜ <b>grantRules</b>ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”.
      </p>

      <div class="row">
        <div class="field">
          <label>ì¶”ì²œ ë¶€ì—¬ì—°ì°¨ì¼ìˆ˜
            <span class="tag">ê·œì • ì„¸íŠ¸ ë¡œì§</span>
          </label>
          <div id="suggestedDaysView" class="small muted">
            ê·¼ì†ì—°ìˆ˜Â·ì¶œê·¼ìœ¨ ê³„ì‚° í›„ [ì—°ì°¨ì¼ìˆ˜ ì¶”ì²œê³„ì‚°] ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.
          </div>
        </div>
      </div>

      <div class="btn-row">
        <button class="btn" type="button" onclick="suggestAnnualDays()">ì—°ì°¨ì¼ìˆ˜ ì¶”ì²œê³„ì‚°</button>
      </div>

      <hr>

      <div class="row">
        <div class="field">
          <label for="grantedDays">
            ì‹¤ì œ ë¶€ì—¬ ì—°ì°¨ì¼ìˆ˜
            <span class="small">(ë‹¨ì²´í˜‘ì•½Â·ì§€ì¹¨ ê¸°ì¤€ ì¼ìˆ˜ ì§ì ‘ ì…ë ¥ ê°€ëŠ¥)</span>
          </label>
          <input type="number" id="grantedDays" min="0" step="0.5" placeholder="ì˜ˆ: 26" />
        </div>
        <div class="field">
          <label for="usedDays">ì—°ì°¨ ì‚¬ìš©ì¼ìˆ˜ í•©ê³„</label>
          <input type="number" id="usedDays" min="0" step="0.5" placeholder="ì˜ˆ: 12.5" />
          <div class="small">
            ì‹œê°„ë‹¨ìœ„ ì—°ì°¨ëŠ” <b>ì¼ìˆ˜ë¡œ í™˜ì‚°</b>í•´ì„œ í•©ì‚° ì…ë ¥ (ì˜ˆ: 2ì¼ 4ì‹œê°„ â†’ 2.5ì¼)
          </div>
        </div>
      </div>
    </section>

    <!-- 4. ì„ê¸ˆ ì •ë³´ -->
    <section class="card">
      <h2>4. ì„ê¸ˆ ì •ë³´</h2>
      <p class="small">
        ë¯¸ì‚¬ìš© ì—°ì°¨ìˆ˜ë‹¹ ê³„ì‚°ì„ ìœ„í•´ <b>í†µìƒì„ê¸ˆ(ì‹œê¸‰/ì›”ê¸‰ ë“±)</b>ì„ ì…ë ¥í•©ë‹ˆë‹¤.<br>
        ê·œì • ì„¸íŠ¸ë³„ë¡œ ì–´ë–¤ ìˆ˜ë‹¹ì„ í¬í•¨í• ì§€, ì–´ë–¤ ë‹¨ê°€ë¥¼ ì“¸ì§€ëŠ”
        ë‚˜ì¤‘ì— ë°±ì—”ë“œÂ·DB ë²„ì „ì—ì„œ ë” ì •êµí•˜ê²Œ ê°€ì ¸ê°€ëŠ” ê±¸ ì „ì œë¡œ,
        ì—¬ê¸°ì„œëŠ” <b>ë‹¨ê°€ë§Œ ì§ì ‘ ì…ë ¥</b>í•˜ëŠ” êµ¬ì¡°ë¡œ ë‘ì—ˆìŠµë‹ˆë‹¤.
      </p>
      <div class="row">
        <div class="field">
          <label for="wageType">ì„ê¸ˆí˜•íƒœ</label>
          <select id="wageType">
            <option value="hourly">ì‹œê¸‰</option>
            <option value="daily">ì¼ê¸‰</option>
            <option value="monthly">ì›”ê¸‰</option>
          </select>
        </div>
        <div class="field">
          <label for="wageAmount">ê¸ˆì•¡ (ì›)</label>
          <input type="number" id="wageAmount" min="0" step="10" placeholder="ì˜ˆ: 12000, 2300000" />
        </div>
      </div>
      <div class="row">
        <div class="field">
          <label for="hoursPerDay">
            1ì¼ ì†Œì •ê·¼ë¡œì‹œê°„
          </label>
          <input type="number" id="hoursPerDay" min="0" step="0.5" placeholder="ì˜ˆ: 8" />
        </div>
        <div class="field">
          <label for="monthlyWorkDays">
            ì›” ì†Œì •ê·¼ë¡œì¼ìˆ˜
            <span class="small">(ì›”ê¸‰Â·ì¼ê¸‰ â†’ 1ì¼ í†µìƒì„ê¸ˆ ì‚°ì¶œìš©)</span>
          </label>
          <input type="number" id="monthlyWorkDays" min="0" step="0.1" placeholder="ì˜ˆ: 20.5" />
        </div>
      </div>
      <div class="row">
        <div class="field">
          <label for="customRoundingStep">
            ì»¤ìŠ¤í…€ ì ˆì‚¬ ë‹¨ìœ„ (ì»¤ìŠ¤í…€ ê·œì •ìš©)
            <span class="small">(ì˜ˆ: 10 â†’ 10ì› ë‹¨ìœ„, 100 â†’ 100ì› ë‹¨ìœ„)</span>
          </label>
          <input type="number" id="customRoundingStep" min="1" step="1" placeholder="ì˜ˆ: 10" />
        </div>
        <div class="field">
          <label for="customRoundingMode">
            ì»¤ìŠ¤í…€ ì ˆì‚¬ ë°©ì‹
            <span class="small">(ì»¤ìŠ¤í…€ ê·œì • ì„ íƒ ì‹œë§Œ ì ìš©)</span>
          </label>
          <select id="customRoundingMode">
            <option value="none">ì—†ìŒ(ì›ë‹¨ìœ„)</option>
            <option value="floor">ë²„ë¦¼</option>
            <option value="round">ë°˜ì˜¬ë¦¼</option>
            <option value="ceil">ì˜¬ë¦¼</option>
          </select>
        </div>
      </div>
    </section>

    <!-- 5. ê²°ê³¼ -->
    <section class="card">
      <h2>5. ê²°ê³¼</h2>
      <div class="btn-row">
        <button class="btn" type="button" onclick="calcResult()">ë¯¸ì‚¬ìš© ì—°ì°¨ìˆ˜ë‹¹ ê³„ì‚°</button>
        <button class="btn outline" type="button" onclick="resetAll()">ì´ˆê¸°í™”</button>
      </div>
      <hr>
      <div class="result-grid">
        <div class="result-item">
          <div class="result-label">ê·œì • ì„¸íŠ¸</div>
          <div class="result-value" id="resProfileName">-</div>
        </div>
        <div class="result-item">
          <div class="result-label">ë¶€ì—¬ ì—°ì°¨ì¼ìˆ˜</div>
          <div class="result-value" id="resGrantedDays">-</div>
        </div>
        <div class="result-item">
          <div class="result-label">ì‚¬ìš© ì—°ì°¨ì¼ìˆ˜</div>
          <div class="result-value" id="resUsedDays">-</div>
        </div>
        <div class="result-item">
          <div class="result-label">ë¯¸ì‚¬ìš© ì—°ì°¨ì¼ìˆ˜</div>
          <div class="result-value highlight" id="resUnusedDays">-</div>
        </div>
        <div class="result-item">
          <div class="result-label">1ì¼ í†µìƒì„ê¸ˆ(ê³„ì‚°ìƒ)</div>
          <div class="result-value" id="resDailyWageRaw">-</div>
        </div>
        <div class="result-item">
          <div class="result-label">ë¯¸ì‚¬ìš© ì—°ì°¨ìˆ˜ë‹¹ (ì›ë‹¨ìœ„, ì´ë¡ ê°’)</div>
          <div class="result-value" id="resPayoutRaw">-</div>
        </div>
        <div class="result-item">
          <div class="result-label">
            ë¯¸ì‚¬ìš© ì—°ì°¨ìˆ˜ë‹¹ (ì ˆì‚¬Â·ë°˜ì˜¬ë¦¼ ê·œì¹™ ì ìš©)
            <span class="tag" id="resRoundingTag">-</span>
          </div>
          <div class="result-value highlight" id="resPayoutRounded">-</div>
        </div>
      </div>
      <p class="small muted" style="margin-top:8px;">
        â€» ì‹¤ì œ ì§€ê¸‰ ì‹œì—ëŠ” ê° ê¸°ê´€ì˜ <b>ë‹¨ì²´í˜‘ì•½Â·ì§€ì¹¨Â·íšŒê³„ê·œì¹™(10ì›/100ì› ë‹¨ìœ„ ì ˆì‚¬Â·ë°˜ì˜¬ë¦¼ ë“±)</b>ì„ ë‹¤ì‹œ í•œ ë²ˆ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.
      </p>
    </section>

    <section class="card">
      <h3>êµ¬ì¡° ì„¤ëª… ë©”ëª¨</h3>
      <p class="small">
        - ìƒë‹¨ ìŠ¤í¬ë¦½íŠ¸ì˜ <code>RULE_PROFILES</code>ì— ê·œì • ì„¸íŠ¸ë¥¼ ì¶”ê°€/ìˆ˜ì •í•˜ë©´,
          ê°™ì€ ì—”ì§„ìœ¼ë¡œ <b>ì—¬ëŸ¬ ê¸°ê´€Â·ì—°ë„Â·ì§ì¢…</b>ì„ ëŒë¦´ ìˆ˜ ìˆê²Œ ì„¤ê³„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.<br>
        - ì˜ˆ: <code>gw_edu_example</code>ë¥¼ ë³µì‚¬í•´ì„œ
          <code>gw_edu_2026_cba</code>, <code>gangwon_school_2027</code> ë“±ìœ¼ë¡œ íŒŒìƒ.<br>
        - ì‹¤ì œ ë‹¨ì²´í˜‘ì•½ ì¡°í•­(ì˜ˆ: ì¶œê·¼ìœ¨ êµ¬ê°„ë³„ ì—°ì°¨ì¼ìˆ˜, ê·¼ì†ì—°ìˆ˜ ê°€ì‚°ì¼ìˆ˜, ì ˆì‚¬ ê·œì¹™ ë“±)ì€
          ì§€ì¹¨Â·í˜‘ì•½ ì›ë¬¸ì„ ë³´ë©´ì„œ <b>grantRules / rounding</b> ë¶€ë¶„ë§Œ ìˆ˜ì •í•˜ë©´ ë©ë‹ˆë‹¤.
      </p>
    </section>
  </div>

  <script>
    // -------------------------------
    // 0. ê·œì • ì„¸íŠ¸ ì •ì˜
    // -------------------------------
    // ì—¬ê¸° RULE_PROFILES ì•ˆì— ì‹¤ì œ ë‹¨ì²´í˜‘ì•½Â·ì§€ì¹¨ ë‚´ìš©ì„ ì˜®ê²¨ ì ëŠ” êµ¬ì¡°.
    // ì§€ê¸ˆì€ "ë²•ì • ê¸°ë³¸í˜•", "ê°•ì› êµìœ¡ê³µë¬´ì§ ì˜ˆì‹œ", "ì»¤ìŠ¤í…€" 3ê°œë§Œ ë„£ì–´ë‘ .
    const RULE_PROFILES = {
      law_basic:{
        id:"law_basic",
        name:"[ë²•ì • ê¸°ë³¸í˜•] ê·¼ë¡œê¸°ì¤€ë²• ë‹¨ìˆœ ë²„ì „",
        // íšŒê³„ì—°ë„ ê¸°ì¤€: 1ì›” 1ì¼í˜• / 3ì›” 1ì¼í˜• ë“± í‘œì‹œìš©
        yearBase:"JAN",
        yearBaseLabel:"1ì›” 1ì¼ ê¸°ì¤€ (ì¼ë°˜ ê·¼ë¡œê¸°ì¤€ë²•í˜•)",
        // ì—°ì°¨ ë¶€ì—¬ ê·œì¹™
        // type: engineì— ì–´ë–¤ ë¡œì§ì„ ì“¸ì§€ í‘œì‹œ
        grantType:"law_basic", 
        // ì ˆì‚¬ ê·œì¹™: ì›ë‹¨ìœ„ ê·¸ëŒ€ë¡œ
        rounding:{
          step:1,          // 1ì›ì´ë©´ ì ˆì‚¬ ì—†ìŒ
          mode:"none",     // none / floor / round / ceil
          label:"ì›ë‹¨ìœ„ (ì ˆì‚¬ ì—†ìŒ)"
        },
        desc:"ê·¼ë¡œê¸°ì¤€ë²• ì¼ë°˜ ê·œì¹™ì„ ë‹¨ìˆœí™”í•œ ì˜ˆì‹œì…ë‹ˆë‹¤. ì‹¤ì œ ê¸°ê´€Â·ë‹¨í˜‘ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
      },
      gw_edu_example:{
        id:"gw_edu_example",
        name:"[ì˜ˆì‹œ] ê°•ì› êµìœ¡ê³µë¬´ì§ ë‹¨í˜‘í˜•(ìƒ˜í”Œ)",
        yearBase:"MAR",
        yearBaseLabel:"3ì›” 1ì¼ ê¸°ì¤€ (í•™êµ í•™ë…„ë„í˜• ì˜ˆì‹œ)",
        grantType:"gw_cba_like", // ê°•ì› êµìœ¡ê³µë¬´ì§ ë‹¨í˜‘ ë¹„ìŠ·í•œ ëŠë‚Œì˜ ìƒ˜í”Œ
        rounding:{
          step:10,
          mode:"floor",
          label:"10ì› ë‹¨ìœ„ ë²„ë¦¼ (ì˜ˆì‹œ)"
        },
        desc:"ê°•ì›ë„êµìœ¡ì²­ êµìœ¡ê³µë¬´ì§ ë‹¨ì²´í˜‘ì•½ì„ í‰ë‚´ë‚¸ ìƒ˜í”Œ ë¡œì§ì…ë‹ˆë‹¤. ì‹¤ì œ ì¡°í•­Â·ì—°ì°¨ì¼ìˆ˜Â·ì ˆì‚¬ ê·œì¹™ì€ ë°˜ë“œì‹œ í˜‘ì•½ ì›ë¬¸ì„ ë³´ê³  ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤."
      },
      custom:{
        id:"custom",
        name:"[ì»¤ìŠ¤í…€] ì‚¬ìš©ìê°€ ì§ì ‘ ê·œì • ì ìš©",
        yearBase:"MANUAL",
        yearBaseLabel:"ê¸°ì¤€ì¼ ìˆ˜ë™ ì…ë ¥",
        grantType:"manual_only", // ì—°ì°¨ì¼ìˆ˜ëŠ” ì „ì ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì…ë ¥
        rounding:{
          step:null,       // í™”ë©´ì—ì„œ customRoundingStep ì‚¬ìš©
          mode:null,       // í™”ë©´ì—ì„œ customRoundingMode ì‚¬ìš©
          label:"í™”ë©´ì—ì„œ ì„ íƒí•œ ì»¤ìŠ¤í…€ ì ˆì‚¬ ê·œì¹™ ì ìš©"
        },
        desc:"ì—°ì°¨ì¼ìˆ˜ëŠ” ì§ì ‘ ì…ë ¥í•˜ê³ , ì ˆì‚¬ ê·œì¹™ë„ í•˜ë‹¨ì—ì„œ ì§ì ‘ ì§€ì •í•´ì„œ ì‚¬ìš©í•˜ëŠ” ëª¨ë“œì…ë‹ˆë‹¤."
      }
    };

    // -------------------------------
    // ìœ í‹¸: ìˆ«ì í¬ë§·
    // -------------------------------
    function fmtNumber(n){
      if(n === null || n === undefined || isNaN(n)) return "-";
      return n.toLocaleString("ko-KR",{maximumFractionDigits:2});
    }

    // ì ˆì‚¬Â·ë°˜ì˜¬ë¦¼ ì²˜ë¦¬
    function roundByRule(amount, profile){
      if(amount === null || amount === undefined || isNaN(amount)) return 0;

      let step = profile.rounding.step;
      let mode = profile.rounding.mode;

      // ì»¤ìŠ¤í…€ ê·œì •ì´ë©´ í™”ë©´ì—ì„œ ì…ë ¥ë°›ì€ ê±¸ ì‚¬ìš©
      if(profile.id === "custom"){
        const s = parseInt(document.getElementById("customRoundingStep").value || "1",10);
        const m = document.getElementById("customRoundingMode").value || "none";
        if(s > 1){
          step = s;
          mode = m;
        }else{
          step = 1;
          mode = "none";
        }
      }

      if(!step || step <= 1 || !mode || mode === "none"){
        return amount; // ì›ë‹¨ìœ„ ê·¸ëŒ€ë¡œ
      }

      const base = amount / step;
      let resultBase = base;

      switch(mode){
        case "floor":
          resultBase = Math.floor(base);
          break;
        case "round":
          resultBase = Math.round(base);
          break;
        case "ceil":
          resultBase = Math.ceil(base);
          break;
        default:
          resultBase = base;
      }
      return resultBase * step;
    }

    // -------------------------------
    // 1. ì›”ë³„ ê·¼ë¬´ í…Œì´ë¸” ìƒì„±
    // -------------------------------
    function initAttendanceTable(){
      const tbody = document.getElementById("attBody");
      tbody.innerHTML = "";
      for(let m=1;m<=12;m++){
        const tr = document.createElement("tr");
        const th = document.createElement("td");
        th.textContent = m+"ì›”";
        const tdPlanned = document.createElement("td");
        const tdWorked = document.createElement("td");

        const ipPlanned = document.createElement("input");
        ipPlanned.type = "number";
        ipPlanned.min = "0";
        ipPlanned.step = "0.5";
        ipPlanned.dataset.month = m;
        ipPlanned.dataset.type = "planned";

        const ipWorked = document.createElement("input");
        ipWorked.type = "number";
        ipWorked.min = "0";
        ipWorked.step = "0.5";
        ipWorked.dataset.month = m;
        ipWorked.dataset.type = "worked";

        tdPlanned.appendChild(ipPlanned);
        tdWorked.appendChild(ipWorked);

        tr.appendChild(th);
        tr.appendChild(tdPlanned);
        tr.appendChild(tdWorked);
        tbody.appendChild(tr);
      }
    }

    // -------------------------------
    // 2. ê·¼ì†ì—°ìˆ˜ ê³„ì‚°
    // -------------------------------
    function calcServiceYears(){
      const hire = document.getElementById("hireDate").value;
      const base = document.getElementById("baseDate").value;
      const view = document.getElementById("serviceYearsView");

      if(!hire || !base){
        view.textContent = "ì…ì‚¬ì¼ê³¼ ê¸°ì¤€ì¼ì„ ëª¨ë‘ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.";
        view.classList.add("danger");
        return;
      }
      const hireDate = new Date(hire);
      const baseDate = new Date(base);
      if(baseDate < hireDate){
        view.textContent = "ê¸°ì¤€ì¼ì´ ì…ì‚¬ì¼ë³´ë‹¤ ë¹ ë¥¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
        view.classList.add("danger");
        return;
      }
      const diffMs = baseDate - hireDate;
      const years = diffMs / (1000*60*60*24*365.2425);
      const yearsFloor = Math.floor(years * 10) / 10;

      view.textContent = yearsFloor.toFixed(1) + "ë…„ (ëŒ€ëµ)";
      view.classList.remove("danger");
      view.classList.remove("muted");
    }

    // -------------------------------
    // 3. ì†Œì •ê·¼ë¡œì¼ ëŒ€ëµ ì±„ìš°ê¸°
    // -------------------------------
    function fillDefaultWorkingDays(){
      const inputs = document.querySelectorAll("#attBody input[data-type='planned']");
      inputs.forEach(ip=>{
        if(!ip.value){
          ip.value = 20; // ëŒ€ì¶© 20ì¼ì”© ê¸°ë³¸ê°’
        }
      });
    }

    // -------------------------------
    // 4. ì¶œê·¼ìœ¨ ê³„ì‚°
    // -------------------------------
    function calcAttendance(){
      const plannedInputs = document.querySelectorAll("#attBody input[data-type='planned']");
      const workedInputs = document.querySelectorAll("#attBody input[data-type='worked']");

      let totalPlanned = 0;
      let totalWorked = 0;
      let fullMonthCount = 0;

      for(let i=0;i<plannedInputs.length;i++){
        const p = parseFloat(plannedInputs[i].value || "0");
        const w = parseFloat(workedInputs[i].value || "0");
        totalPlanned += p;
        totalWorked += w;
        if(p > 0 && p === w){
          fullMonthCount++;
        }
      }

      const rate = totalPlanned>0 ? (totalWorked/totalPlanned*100) : null;

      document.getElementById("totalPlannedView").textContent = fmtNumber(totalPlanned) + " ì¼";
      document.getElementById("totalWorkedView").textContent = fmtNumber(totalWorked) + " ì¼";
      document.getElementById("attendanceRateView").textContent = rate===null ? "-" : rate.toFixed(1)+" %";
      document.getElementById("fullMonthCountView").textContent = totalPlanned>0 ? fullMonthCount+" ê°œì›”" : "-";
    }

    // -------------------------------
    // 5. ê·œì • ì„¸íŠ¸ ì„ íƒ ì‹œ í‘œì‹œ
    // -------------------------------
    function getSelectedProfile(){
      const id = document.getElementById("ruleProfile").value || "law_basic";
      return RULE_PROFILES[id] || RULE_PROFILES["law_basic"];
    }

    function onProfileChange(){
      const profile = getSelectedProfile();
      document.getElementById("profileYearBaseView").textContent = profile.yearBaseLabel;
      document.getElementById("profileRoundingView").textContent = profile.rounding.label;
      document.getElementById("profileDescView").textContent = profile.desc;

      // yearBaseì— ë”°ë¼ ê¸°ì¤€ì¼ ìë™ ì„¸íŒ… (JAN/MAR)
      const baseDateInput = document.getElementById("baseDate");
      const y = parseInt(document.getElementById("year").value || new Date().getFullYear(),10);
      let d;
      if(profile.yearBase === "JAN"){
        d = new Date(y,0,1); // 1ì›” 1ì¼
      }else if(profile.yearBase === "MAR"){
        d = new Date(y,2,1); // 3ì›” 1ì¼
      }else{
        d = new Date(); // ì»¤ìŠ¤í…€ì€ ìˆ˜ë™ ì¡°ì • ì „ì œë¡œ ì˜¤ëŠ˜
      }
      baseDateInput.valueAsDate = d;
    }

    // -------------------------------
    // 6. ì—°ì°¨ì¼ìˆ˜ ì¶”ì²œ ê³„ì‚° (í”„ë¡œí•„ë³„)
    // -------------------------------
    function parseServiceYears(){
      const hire = document.getElementById("hireDate").value;
      const base = document.getElementById("baseDate").value;
      if(!hire || !base) return null;
      const hireDate = new Date(hire);
      const baseDate = new Date(base);
      if(baseDate < hireDate) return null;
      const diffMs = baseDate - hireDate;
      const years = diffMs / (1000*60*60*24*365.2425);
      return {
        years: years,
        fullYears: Math.floor(years),
        years1d: Math.floor(years * 10)/10
      };
    }

    function parseAttendanceSummary(){
      const rateText = document.getElementById("attendanceRateView").textContent;
      const fullMonthText = document.getElementById("fullMonthCountView").textContent;
      let rate = null;
      if(rateText && rateText.includes("%")){
        rate = parseFloat(rateText.replace("%",""));
      }
      let fullMonths = 0;
      if(fullMonthText && fullMonthText.includes("ê°œì›”")){
        fullMonths = parseInt(fullMonthText.replace("ê°œì›”","").trim()) || 0;
      }
      return {rate, fullMonths};
    }

    function suggestAnnualDays(){
      const suggestedView = document.getElementById("suggestedDaysView");
      const profile = getSelectedProfile();
      const svc = parseServiceYears();
      const att = parseAttendanceSummary();

      if(!svc){
        suggestedView.textContent = "ì…ì‚¬ì¼Â·ê¸°ì¤€ì¼ì„ ë¨¼ì € ì…ë ¥í•˜ê³  ê·¼ì†ì—°ìˆ˜ë¥¼ ê³„ì‚°í•´ì£¼ì„¸ìš”.";
        suggestedView.classList.add("danger");
        return;
      }

      let suggestedDays = 0;
      let desc = "";
      const fullYears = svc.fullYears;
      const rate = att.rate;
      const fullMonths = att.fullMonths;

      if(profile.grantType === "law_basic"){
        // ê·¼ë¡œê¸°ì¤€ë²• ë‹¨ìˆœí˜•
        if(fullYears < 1){
          // 1ë…„ ë¯¸ë§Œ: ì›” ê°œê·¼ì¼ìˆ˜ë§Œí¼, ìµœëŒ€ 11ì¼
          suggestedDays = Math.min(fullMonths,11);
          desc = `ë²•ì • ê¸°ë³¸í˜•: 1ë…„ ë¯¸ë§Œ ê·¼ë¡œ, ì›” ê°œê·¼ ${fullMonths}ê°œì›” â†’ ${suggestedDays}ì¼ (ì˜ˆì‹œ: ìµœëŒ€ 11ì¼)`;
        }else{
          if(rate !== null && rate < 80){
            suggestedDays = fullMonths;
            desc = `ë²•ì • ê¸°ë³¸í˜•: ì¶œê·¼ìœ¨ ${rate.toFixed(1)}% (80% ë¯¸ë§Œ) â†’ ì›” ê°œê·¼ ${fullMonths}ê°œì›” = ${suggestedDays}ì¼ë¡œ ë‹¨ìˆœ ê³„ì‚°`;
          }else{
            const extra = Math.max(0, Math.min(10, Math.floor((fullYears - 1)/2)));
            suggestedDays = 15 + extra;
            desc = `ë²•ì • ê¸°ë³¸í˜•: ê·¼ì† ${fullYears}ë…„ / ì¶œê·¼ìœ¨ ${rate===null ? "ë¯¸ì…ë ¥" : rate.toFixed(1)+"%"} â†’ ê¸°ë³¸ 15ì¼ + ê°€ì‚° ${extra}ì¼ = ${suggestedDays}ì¼ (ì˜ˆì‹œ)`;
          }
        }
      }else if(profile.grantType === "gw_cba_like"){
        // ê°•ì› êµìœ¡ê³µë¬´ì§ ë‹¨í˜‘ í‰ë‚´ë‚¸ ìƒ˜í”Œ ë¡œì§
        // ğŸ‘‰ ì‹¤ì œ ì¡°í•­ì— ë§ê²Œ ì´ êµ¬ê°„ë³„ ë¡œì§ì„ ìˆ˜ì •í•˜ë©´ ë¨
        if(fullYears < 1){
          // 1ë…„ ë¯¸ë§Œ: ì›” ê°œê·¼ 1ì¼ì”©, ìµœëŒ€ 11ì¼
          suggestedDays = Math.min(fullMonths,11);
          desc = `ê°•ì› CBA ìƒ˜í”Œ: 1ë…„ ë¯¸ë§Œ, ì›” ê°œê·¼ ${fullMonths}ê°œì›” â†’ ${suggestedDays}ì¼ (ìµœëŒ€ 11ì¼ ì˜ˆì‹œ)`;
        }else{
          // ì˜ˆì‹œ: 1ë…„ ì´ìƒ ì¶œê·¼ìœ¨ 80% ì´ìƒì´ë©´ 26ì¼ ê³ ì •, 80% ë¯¸ë§Œì´ë©´ ì›”ê°œê·¼ìˆ˜
          if(rate !== null && rate >= 80){
            // ê·¼ì†ì— ë”°ë¼ 25~26ì¼ ë“±ìœ¼ë¡œ ì¡°ì •í•˜ê³  ì‹¶ìœ¼ë©´ ì—¬ê¸°ì„œ ë¶„ê¸°
            suggestedDays = 26; // â˜… ì—¬ê¸°ë¥¼ ì‹¤ì œ ë‹¨ì²´í˜‘ì•½ ì—°ì°¨ì¼ìˆ˜ë¡œ ìˆ˜ì •
            desc = `ê°•ì› CBA ìƒ˜í”Œ: ê·¼ì† ${fullYears}ë…„ / ì¶œê·¼ìœ¨ ${rate.toFixed(1)}% â†’ ${suggestedDays}ì¼ (ìƒ˜í”Œ ê°’)`;
          }else if(rate !== null){
            suggestedDays = fullMonths;
            desc = `ê°•ì› CBA ìƒ˜í”Œ: ì¶œê·¼ìœ¨ ${rate.toFixed(1)}% (80% ë¯¸ë§Œ) â†’ ì›” ê°œê·¼ ${fullMonths}ê°œì›” = ${suggestedDays}ì¼ë¡œ ë‹¨ìˆœ ì ìš©`;
          }else{
            suggestedDays = 26;
            desc = `ê°•ì› CBA ìƒ˜í”Œ: ì¶œê·¼ìœ¨ ë¯¸ì…ë ¥ â†’ ì¼ë‹¨ ${suggestedDays}ì¼ë¡œ ê°€ì • (ìƒ˜í”Œ ê°’)`;
          }
        }
      }else if(profile.grantType === "manual_only"){
        // ì»¤ìŠ¤í…€: ì¶”ì²œê°’ì€ ê·¸ëƒ¥ ì•ˆë‚´ ë¬¸êµ¬ë§Œ
        desc = "ì»¤ìŠ¤í…€ ê·œì • ëª¨ë“œì…ë‹ˆë‹¤. ì‹¤ì œ ë¶€ì—¬ ì—°ì°¨ì¼ìˆ˜ëŠ” ì•„ë˜ ì¹¸ì— ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”.";
        suggestedDays = null;
      }

      if(profile.grantType === "manual_only"){
        suggestedView.textContent = desc;
      }else{
        suggestedView.textContent = `${desc}`;
        // ì‹¤ì œ ë¶€ì—¬ì¼ìˆ˜ ì…ë ¥ë€ì— ê¸°ë³¸ê°’ìœ¼ë¡œ ë°˜ì˜ (ë¹„ì–´ìˆì„ ë•Œë§Œ)
        const grantedInput = document.getElementById("grantedDays");
        if(!grantedInput.value && suggestedDays !== null){
          grantedInput.value = suggestedDays;
        }
      }

      suggestedView.classList.remove("danger");
      suggestedView.classList.remove("muted");
    }

    // -------------------------------
    // 7. ê²°ê³¼ ê³„ì‚°
    // -------------------------------
    function calcResult(){
      const profile = getSelectedProfile();
      const granted = parseFloat(document.getElementById("grantedDays").value || "0");
      const used = parseFloat(document.getElementById("usedDays").value || "0");

      const wageType = document.getElementById("wageType").value;
      const wageAmount = parseFloat(document.getElementById("wageAmount").value || "0");
      const hoursPerDay = parseFloat(document.getElementById("hoursPerDay").value || "0");
      const monthlyWorkDays = parseFloat(document.getElementById("monthlyWorkDays").value || "0");

      let unused = granted - used;
      if(unused < 0) unused = 0;

      // 1ì¼ í†µìƒì„ê¸ˆ (ì´ë¡ ê°’)
      let dailyWage = 0;

      if(wageType === "hourly"){
        if(wageAmount > 0 && hoursPerDay > 0){
          dailyWage = wageAmount * hoursPerDay;
        }
      }else if(wageType === "daily"){
        dailyWage = wageAmount;
      }else if(wageType === "monthly"){
        if(wageAmount > 0 && monthlyWorkDays > 0){
          dailyWage = wageAmount / monthlyWorkDays;
        }
      }

      const payoutRaw = unused * dailyWage;
      const payoutRounded = roundByRule(payoutRaw, profile);

      // ê²°ê³¼ í‘œì‹œ
      document.getElementById("resProfileName").textContent = profile.name;
      document.getElementById("resGrantedDays").textContent = fmtNumber(granted) + " ì¼";
      document.getElementById("resUsedDays").textContent = fmtNumber(used) + " ì¼";
      document.getElementById("resUnusedDays").textContent = fmtNumber(unused) + " ì¼";

      document.getElementById("resDailyWageRaw").textContent = dailyWage>0 ? fmtNumber(Math.round(dailyWage)) + " ì›" : "-";
      document.getElementById("resPayoutRaw").textContent = payoutRaw>0 ? fmtNumber(Math.round(payoutRaw)) + " ì›" : "-";
      document.getElementById("resPayoutRounded").textContent = payoutRounded>0 ? fmtNumber(Math.round(payoutRounded)) + " ì›" : "-";

      const roundingTag = document.getElementById("resRoundingTag");
      if(profile.id === "custom"){
        const step = parseInt(document.getElementById("customRoundingStep").value || "1",10);
        const mode = document.getElementById("customRoundingMode").value || "none";
        if(step > 1 && mode !== "none"){
          let modeLabel = "";
          if(mode === "floor") modeLabel = "ë²„ë¦¼";
          else if(mode === "round") modeLabel = "ë°˜ì˜¬ë¦¼";
          else if(mode === "ceil") modeLabel = "ì˜¬ë¦¼";
          else modeLabel = "ì›ë‹¨ìœ„";
          roundingTag.textContent = `${step}ì› ë‹¨ìœ„ ${modeLabel}`;
        }else{
          roundingTag.textContent = "ì›ë‹¨ìœ„ (ì ˆì‚¬ ì—†ìŒ)";
        }
      }else{
        roundingTag.textContent = profile.rounding.label;
      }
    }

    // -------------------------------
    // 8. ì´ˆê¸°í™”
    // -------------------------------
    function resetAll(){
      if(!confirm("ì…ë ¥ ë‚´ìš©ì„ ëª¨ë‘ ì´ˆê¸°í™”í• ê¹Œìš”?")) return;
      document.querySelectorAll("input").forEach(ip=>ip.value = "");
      document.getElementById("year").value = new Date().getFullYear();

      document.getElementById("jobType").value = "";
      document.getElementById("workType").value = "ìƒì‹œ";
      document.getElementById("wageType").value = "hourly";
      document.getElementById("customRoundingMode").value = "none";

      document.getElementById("serviceYearsView").textContent = "ì…ì‚¬ì¼Â·ê¸°ì¤€ì¼ ì…ë ¥ ì‹œ í‘œì‹œë©ë‹ˆë‹¤.";
      document.getElementById("serviceYearsView").className = "small muted";

      document.getElementById("totalPlannedView").textContent = "-";
      document.getElementById("totalWorkedView").textContent = "-";
      document.getElementById("attendanceRateView").textContent = "-";
      document.getElementById("fullMonthCountView").textContent = "-";

      document.getElementById("suggestedDaysView").textContent = "ê·¼ì†ì—°ìˆ˜Â·ì¶œê·¼ìœ¨ ê³„ì‚° í›„ [ì—°ì°¨ì¼ìˆ˜ ì¶”ì²œê³„ì‚°] ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.";
      document.getElementById("suggestedDaysView").className = "small muted";

      document.getElementById("resProfileName").textContent = "-";
      document.getElementById("resGrantedDays").textContent = "-";
      document.getElementById("resUsedDays").textContent = "-";
      document.getElementById("resUnusedDays").textContent = "-";
      document.getElementById("resDailyWageRaw").textContent = "-";
      document.getElementById("resPayoutRaw").textContent = "-";
      document.getElementById("resPayoutRounded").textContent = "-";
      document.getElementById("resRoundingTag").textContent = "-";

      initAttendanceTable();
      onProfileChange();
    }

    // -------------------------------
    // ì´ˆê¸° ì§„ì… ì„¤ì •
    // -------------------------------
    (function init(){
      const yearInput = document.getElementById("year");
      const now = new Date();
      yearInput.value = now.getFullYear();
      initAttendanceTable();
      onProfileChange();
    })();
  </script>
</body>
</html>
